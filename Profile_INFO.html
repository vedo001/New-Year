<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Buddy Profile</title>
<script>
async function loadBuddy(){
    const loginID = localStorage.getItem("loginUser");
    if(!loginID){
        alert("กรุณา Login ก่อน");
        window.location = "Login.html";
        return;
    }

    const data = await fetch("employees.json").then(r => r.json());
    const user = data.find(x => x.id === loginID);
    const buddy = data.find(x => x.id === user.buddy);

    if(!buddy){
        document.getElementById("result").innerHTML = "ไม่พบข้อมูล Buddy";
        return;
    }

    document.getElementById("result").innerHTML = `
        <h2>Buddy ของคุณคือ</h2>
        <img src="${buddy.id}.png" alt="Buddy Photo" width="150"><br><br>
        <b>ชื่อ:</b> ${buddy.name}<br>
        <b>ชื่อเล่น:</b> ${buddy.nickname}<br>
        <b>แผนก:</b> ${buddy.department}<br>
        <b>แพ้อาหาร:</b> ${buddy.food_allergy}<br>
        <b>ที่นั่ง:</b> ${buddy.seat}<br>
    `;
}
</script>
</head>
<body onload="loadBuddy()">
<div id="result"></div>
</body>
</html>
